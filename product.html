<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Product Detail – UNKWN LABS</title>
    <link rel="stylesheet" href="styles.css" />
    <!-- Font Awesome for social icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
      integrity="sha512-9btcM+5mc0Sftt7jH9p8DB5ieM9deUkLH3FJVT+vffA55t2vJDeBK5BljR4daFN8SBJQc0Oh5ODa8NOyzhpJrA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <style>
      /* Additional styles specific to product page */
      .product-detail-section {
        margin-top: 100px;
        margin-bottom: 4rem;
      }
      .product-detail {
        display: flex;
        flex-wrap: wrap;
        gap: 2rem;
      }
      .product-detail-image {
        flex: 1 1 400px;
        max-width: 500px;
        border-radius: 4px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }
      .product-detail-info {
        flex: 1 1 300px;
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }
      .product-detail-name {
        font-size: 2.2rem;
        margin-bottom: 0.5rem;
        font-weight: 600;
      }
      .product-detail-description {
        font-size: 1rem;
        line-height: 1.6;
        max-width: 600px;
      }

      /* Feature list styling to communicate professional print qualities */
      .product-features {
        list-style: none;
        padding-left: 0;
        margin: 0 0 1rem 0;
      }
      .product-features li {
        display: flex;
        align-items: flex-start;
        font-size: 0.95rem;
        margin-bottom: 0.3rem;
      }
      .product-features li i {
        color: var(--accent-color);
        margin-right: 0.4rem;
        font-size: 1rem;
        line-height: 1.2;
      }
      .size-select {
        padding: 0.5rem;
        font-size: 1rem;
        border: 1px solid #ccc;
        border-radius: 4px;
        background-color: #f8f6f4;
        width: fit-content;
      }
      .add-to-cart-btn {
        width: fit-content;
      }
    </style>
  </head>
  <body>
    <!-- Header -->
    <header class="site-header">
      <div class="container nav-container">
        <a class="logo" href="index.html">UNKWN LABS</a>
        <nav class="main-nav">
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="shop.html">Shop</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="contact.html">Contact</a></li>
            <li>
              <a href="cart.html" class="cart-link">
                Cart
                <span id="cart-count" class="cart-count">0</span>
              </a>
            </li>
          </ul>
        </nav>
      </div>
    </header>

    <!-- Product detail section -->
    <section class="container product-detail-section">
      <div id="product-detail" class="product-detail">
        <img
          src=""
          alt="Product image"
          class="product-detail-image"
        />
        <div class="product-detail-info">
          <h1 class="product-detail-name"></h1>
          <p class="product-detail-description"></p>
          <!-- Key features emphasising gallery quality, thickness options and custom sizes -->
          <ul class="product-features">
            <li><i class="fas fa-check-circle"></i>Luminous colours & depth for a gallery finish</li>
            <li><i class="fas fa-check-circle"></i>Choice of 2 mm, 4 mm or 6 mm acrylic thickness</li>
            <li><i class="fas fa-check-circle"></i>Custom sizes with ready‑to‑hang hardware</li>
          </ul>
          <label for="size-select">Select Size:</label>
          <select id="size-select" class="size-select"></select>
          <!-- Resolution quality indicator; dots and label will be updated via JavaScript -->
          <div class="quality-indicator" style="display:none;">
            <div class="quality-dots">
              <span class="quality-dot"></span>
              <span class="quality-dot"></span>
              <span class="quality-dot"></span>
              <span class="quality-dot"></span>
              <span class="quality-dot"></span>
            </div>
            <span class="quality-label">Quality</span>
          </div>
          <button class="btn btn-primary add-to-cart-btn">Add to Cart</button>
        <!-- Button to open room view overlay -->
        <button id="view-room-btn" class="btn btn-secondary" style="margin-top: 0.5rem;">View in Room</button>
        </div>
      </div>
    </section>

    <!-- Room view overlay (initially hidden) -->
    <div id="room-view-overlay" class="room-overlay" style="display: none;">
      <div class="room-container">
        <!-- Close button -->
        <button id="close-room-view" class="room-close" aria-label="Close room view">×</button>
        <!-- Instruction text -->
        <div class="room-instructions">Drag to position; scroll to zoom; shift+drag horizontally or use the slider to rotate</div>
        <!-- Controls for rotating the print -->
        <div class="room-controls">
          <label for="rotate-range">Rotate:</label>
          <!-- Range now covers a full 360° sweep (-180° to +180°) for realistic perspective -->
          <input type="range" id="rotate-range" min="-180" max="180" value="0" step="1" />
        </div>
        <!-- Background room image -->
        <img src="assets/images/room.png" alt="Room background" class="room-background" />
        <!-- Print preview image that will be made draggable -->
        <img src="" alt="Print preview" id="room-print" class="room-print" />
      </div>
    </div>

    <!-- Footer -->
    <footer class="site-footer">
      <div class="container footer-grid">
        <div class="footer-column">
          <h4>UNKWN LABS</h4>
          <p>
            Fine art prints crafted with care in Fort Lauderdale, Florida.
            Follow our journey and let your walls come alive.
          </p>
        </div>
        <div class="footer-column">
          <h4>Navigation</h4>
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="shop.html">Shop</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="contact.html">Contact</a></li>
          </ul>
        </div>
        <div class="footer-column">
          <h4>Get in Touch</h4>
          <p>Email: info@unkwnlabs.com</p>
          <p>Phone: +1&nbsp;(954)&nbsp;555‑0123</p>
        </div>
      </div>
      <div class="footer-bottom">
        ©2025 UNKWN LABS. All rights reserved.
          <span class="footer-social">
            <a href="https://www.instagram.com/unkwnphoto" target="_blank" aria-label="Instagram" style="display:inline-block; line-height:1; margin-left:0.5rem;">
              <!-- Inline SVG for the Instagram icon to avoid loading external icon fonts -->
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                <path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9 114.9-51.3 114.9-114.9S287.7 141 224.1 141zm0 188.6c-40.7 0-73.8-33.1-73.8-73.8s33.1-73.8 73.8-73.8 73.8 33.1 73.8 73.8-33.1 73.8-73.8 73.8zm146.4-194.3c0 14.9-12.1 27-27 27-14.9 0-27-12.1-27-27 0-14.9 12.1-27 27-27 14.9 0 27 12.1 27 27zm76.1 27.2c-1.7-35.7-9.9-67.4-36.1-92.7S389 47.7 353.3 46c-35.8-1.7-142.9-1.7-178.7 0-35.7 1.7-67.4 9.9-92.7 36.1S47.7 123 46 158.7c-1.7 35.8-1.7 142.9 0 178.7 1.7 35.7 9.9 67.4 36.1 92.7s57 34.4 92.7 36.1c35.8 1.7 142.9 1.7 178.7 0 35.7-1.7 67.4-9.9 92.7-36.1 26.2-26.2 34.4-57 36.1-92.7 1.7-35.8 1.7-142.9 0-178.7z"/>
              </svg>
            </a>
          </span>
      </div>
    </footer>

    <script src="products.js"></script>
    <script src="scripts.js"></script>

    <!-- Room view functionality script -->
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const viewBtn = document.getElementById('view-room-btn');
        const overlay = document.getElementById('room-view-overlay');
        const roomPrint = document.getElementById('room-print');
        const closeBtn = document.getElementById('close-room-view');
        const productImage = document.querySelector('.product-detail-image');
        const rotateRange = document.getElementById('rotate-range');
        if (viewBtn && overlay && roomPrint && closeBtn && productImage) {
          // Helper to parse selected size string into width and height in inches
          function parseSize(sizeStr) {
            // sizeStr comes like "12×16" or "20×30" (separated by multiplication sign)
            const parts = sizeStr.split('×');
            const w = parseFloat(parts[0]);
            const h = parseFloat(parts[1]);
            return { width: w, height: h };
          }
          // Convert inches to pixels for the room view (rough approximation)
          function inchesToPixels(inches) {
            // 1 inch ≈ 10 pixels for a more realistic scaling of prints in the room view
            return inches * 10;
          }
          // Helper to update transform and glare based on current scale and rotation
          function applyTransform() {
            const scale = parseFloat(roomPrint.dataset.scale || '1');
            const rotate = parseFloat(roomPrint.dataset.rotate || '0');
            roomPrint.style.transform =
              'translate(-50%, -50%) scale(' + scale + ') rotateY(' + rotate + 'deg)';
            // Update glare opacity proportional to rotation angle (max 0.4)
            const opacity = Math.min(Math.abs(rotate) / 30 * 0.4, 0.4);
            roomPrint.style.setProperty('--glare-opacity', opacity.toString());
          }

          viewBtn.addEventListener('click', () => {
            // Set the print image source to the displayed product image
            roomPrint.src = productImage.src;
            // Determine selected size and adjust print dimensions
            const sizeSelect = document.getElementById('size-select');
            let selected = sizeSelect ? sizeSelect.value : '';
            // The option value is just the size (e.g. "12×16") for clarity
            if (selected.includes('×')) {
              const dims = parseSize(selected);
              const widthPx = inchesToPixels(dims.width);
              const heightPx = inchesToPixels(dims.height);
              roomPrint.style.width = widthPx + 'px';
              roomPrint.style.height = heightPx + 'px';
            } else {
              // fallback if format unexpected: default width/height
              roomPrint.style.width = '200px';
              roomPrint.style.height = '200px';
            }
            // Reset any previous transform and zoom/rotation factors
            roomPrint.dataset.scale = '1';
            roomPrint.dataset.rotate = '0';
            applyTransform();
            // Center the print in the room
            const containerRect = overlay
              .querySelector('.room-container')
              .getBoundingClientRect();
            const left = (containerRect.width - roomPrint.offsetWidth) / 2;
            const top = (containerRect.height - roomPrint.offsetHeight) / 2;
            roomPrint.style.left = left + 'px';
            roomPrint.style.top = top + 'px';
            overlay.style.display = 'flex';
          });
          closeBtn.addEventListener('click', () => {
            overlay.style.display = 'none';
          });
          // Dragging and rotation logic
          let dragging = false;
          let rotating = false;
          let offsetX = 0;
          let offsetY = 0;
          let rotateStartX = 0;
          let rotateStartDeg = 0;
          roomPrint.addEventListener('mousedown', (e) => {
            // If the Shift key is held down, start rotating instead of dragging
            if (e.shiftKey) {
              e.preventDefault();
              rotating = true;
              rotateStartX = e.clientX;
              rotateStartDeg = parseFloat(roomPrint.dataset.rotate || '0');
            } else {
              dragging = true;
              const rect = roomPrint.getBoundingClientRect();
              offsetX = e.clientX - rect.left;
              offsetY = e.clientY - rect.top;
            }
          });
          document.addEventListener('mousemove', (e) => {
            if (rotating) {
              // Calculate horizontal movement as basis for rotation
              const deltaX = e.clientX - rotateStartX;
              let newRotation = rotateStartDeg + deltaX * 0.5;
              // Wrap rotation within [-180, 180]
              if (newRotation > 180) newRotation = 180;
              if (newRotation < -180) newRotation = -180;
              roomPrint.dataset.rotate = newRotation.toString();
              if (rotateRange) {
                rotateRange.value = newRotation;
              }
              applyTransform();
            } else if (dragging) {
              const containerRect = overlay
                .querySelector('.room-container')
                .getBoundingClientRect();
              // calculate new position relative to container
              let left = e.clientX - containerRect.left - offsetX;
              let top = e.clientY - containerRect.top - offsetY;
              // clamp within container bounds to keep print fully visible
              const maxLeft = containerRect.width - roomPrint.offsetWidth;
              const maxTop = containerRect.height - roomPrint.offsetHeight;
              if (left < 0) left = 0;
              if (top < 0) top = 0;
              if (left > maxLeft) left = maxLeft;
              if (top > maxTop) top = maxTop;
              roomPrint.style.left = left + 'px';
              roomPrint.style.top = top + 'px';
            }
          });
          document.addEventListener('mouseup', () => {
            dragging = false;
            rotating = false;
          });
          // Zoom functionality using mouse wheel
          roomPrint.addEventListener('wheel', (e) => {
            e.preventDefault();
            let scale = parseFloat(roomPrint.dataset.scale || '1');
            if (e.deltaY < 0) {
              scale *= 1.1;
            } else {
              scale *= 0.9;
            }
            // Constrain scale between 0.5 and 3 to prevent extreme zoom
            if (scale < 0.5) scale = 0.5;
            if (scale > 3) scale = 3;
            roomPrint.dataset.scale = scale.toString();
            applyTransform();
          });

          // Rotation functionality using range slider
          if (rotateRange) {
            rotateRange.addEventListener('input', () => {
              roomPrint.dataset.rotate = rotateRange.value;
              applyTransform();
            });
          }
        }
      });
    </script>
  </body>
</html>